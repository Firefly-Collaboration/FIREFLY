<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>DESI - FIREFLY</title>
  <link rel="stylesheet" href="css\style.css" />
  <script src="js\script.js" defer></script>
</head>
<body>
  <!-- Topbar: black bar with logo, title, and menu icon -->
  <div class="topbar" id="topbar">
  <div class="logo-area">
    <a href="index.html" class="home-link">
      <img src="images/AIfly.png" alt="Logo" class="logo-img" />
      <span class="firefly-title">FIREFLY</span>
    </a>
  </div>
<!-- From Uiverse.io by vinodjangid07 --> 
  <button class="Btn-git" onclick="window.open('https://github.com/FireflySpectra/firefly_release', '_blank')">
    <svg class="svgIcon-git" viewBox="0 0 496 512" height="1.4em" xmlns="https://github.com/FireflySpectra/firefly_release"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg>
    <span class="text-git">Github</span>
  </button>
  <div class="menu-icon" id="menuIcon" tabindex="0" aria-label="Open menu">
    <span></span>
    <span></span>
    <span></span>
  </div>
    <div class="menu-drawer" id="menuDrawer">
      <ul>
        <li><a href=index.html#intro">About</a></li>
        <li><a href="demofitter.html">FIREFLY Demo</a></li>
        <li>
          <a href="index.html#install">Install →</a>
          <ul>
            <li><a href="installation.html">Installation</a></li>
            <li><a href="configuration.html">Configuration</a></li>
            <li><a href="start-fitting.html">Launch</a></li>
          </ul>
        </li>
        <li><a href="index.html#models">Models</a></li>
        <li>
          <a href="index.html#surveys">Surveys →</a>
          <ul>
            <li><a href="desi.html">DESI</a></li>
            <li><a href="sdss.html">SDSS</a></li>
          </ul>
        </li>
        <li><a href="index.html#gallery">Gallery</a></li>
        <li><a href="index.html#contact">Usage</a></li>
      </ul>
    </div>
  </div>

  <div class="image-credit-wrapper">
  <header class="hero-desi"></header>
  <div class="image-credit">
    Credit: NOIRLab/NSF/AURA/P. Marenfeld — <a href="https://www.desi.lbl.gov/photos/" target="_blank" rel="noopener">CC BY 4.0</a>
  </div>
  </div>
  <header><h1 class="ffx-reveal">DESI</h1></header>


  <section class="section light"> 
    <div class="fact-grid ffx-reveal">
    <div class="fact-box ffx-reveal">
      <div class="fact-number">40M</div>
      <div class="fact-bar"></div>
      <div class="fact-title">Targets</div>
      <p-2>Stars, galaxies and quasars to be mapped</p-2>
    </div>
    <div class="fact-box ffx-reveal">
      <div class="fact-number">14,000</div>
      <div class="fact-bar"></div>
      <div class="fact-title">Square Degrees</div>
      <p-2>Sky coverage of the DESI survey</p-2>
    </div>
    <div class="fact-box ffx-reveal">
      <div class="fact-number">5,000</div>
      <div class="fact-bar"></div>
      <div class="fact-title">Fibers</div>
      <p-2>Simultaneous spectroscopic observations</p-2>
    </div>
    <div class="fact-box ffx-reveal">
      <div class="fact-number">z ~ 3.5</div>
      <div class="fact-bar"></div>
      <div class="fact-title">Redshift</div>
      <p-2>Maximum cosmic distance probed</p-2>
    </div>
    </div>

    <h3 class="ffx-reveal">A Mission to Map the Cosmos</h3>
    <p class="ffx-reveal">The Dark Energy Spectroscopic Instrument (DESI) marks the next-generation of wide-field spectroscopic survey in observational cosmology and galaxy evolution. Installed on the 4-metre Mayall Telescope at Kitt Peak National Observatory (Arizona), equipped with 5,000 robotic fibers and ten spectrographs covering 3600-9800 Å at R≈2000-5000, DESI will map tens of millions of galaxies, quasars and stars across ~14,000 deg² of sky.</p>

    <div style="text-align: center; margin-top: 20px;"></div>
    <h2 class="h-left ffx-reveal">Survey Overview</h2>

    <div class="desi-image-grid ffx-reveal" style="margin-top: -45px;">
      <div class="image-credit-wrapper">
        <img src="images/desi_telescope_internaldome.jpg" alt="DESI telescope inside dome">
        <div class="image-credit">
          Credit: Marilyn Sargent/Berkeley Lab —
          <a href="https://www.desi.lbl.gov/photos/" target="_blank" rel="noopener">CC BY 4.0</a>
        </div>
      </div>

      <div class="right-images">
        <div class="image-credit-wrapper">
          <img src="images/desi_telescope_observingnight.jpg" alt="DESI instrument setup">
          <div class="image-credit">
            Credit: KPNO/NOIRLab/NSF/AURA/R.T. Sparks —
            <a href="https://www.desi.lbl.gov/photos/" target="_blank" rel="noopener">CC BY 4.0</a>
          </div>
        </div>

        <div class="image-credit-wrapper">
          <img src="images/desi_Y3_slicefan.jpg" alt="DESI optical fibers">
          <div class="image-credit">
            Credit: DESI Collaboration and KPNO/NOIRLab/NSF/AURA/R. Proctor —
            <a href="https://www.desi.lbl.gov/photos/" target="_blank" rel="noopener">CC BY 4.0</a>
          </div>
        </div>
      </div>
    </div>

    <p class="ffx-reveal">Designed for precision cosmology, DESI will help unlock the mysteries of cosmic expansion and the role of dark energy in shaping the cosmos. Besides its primary goal to map the expansion history of the Universe via baryon acoustic oscillations and redshift-space distortions, DESI also provides the opportunity to perform stellar population studies with crucial insights into galaxy formation and evolution using its enormous spectroscopic dataset. DESI's target selection includes 7 million Milky Way stars, 14 million Bright Galaxy Survey (BGS) galaxies, 7.5 million Luminous Red Galaxies (LRGs), 15.5 million Emission Line Galaxies (ELGs) and 3 million quasars.</p>
    <p class="ffx-reveal">With DESI's superior instrumentation, broader wavelength range and higher resolution compared to SDSS, the survey will vastly surpass its predecessors in sample size, allowing for unprecedented statistical power in studying galaxy populations across cosmic time. The new robotic positioner replaces SDSS's fixed fibre plates, allowing 5000 simultaneous exposures and flexible tiling. Moreover, DESI's depth and observing strategy yield much higher S/N for much fainter targets and in practice, DESI routinely attains S/N > 0.5 per Å in 4000 sec exposures even for objects at z > 2.</p>
    <p class="ffx-reveal">These improvements prove crucial for galaxy analysis. Higher spectral resolution and S/N mean faint absorption features and continuum shapes are measured more precisely, enabling reliable stellar population fits out to much greater redshifts. DESI's wide sky coverage and breadth of targets, offers a rich and diverse galaxy sample for stellar population studies.</p>
    <h2 class="h-left ffx-reveal">DESI EDR</h2>
    <p class="ffx-reveal">The Dark Energy Spectroscopic Instrument (DESI) Early Data Release (EDR) marks the first major milestone in one of the most ambitious spectroscopic surveys ever conducted. Between 2020 - 2021, DESI completed its Survey Validation (SV) phase and began full operations, collecting 1.77 million high-quality spectra across its five core target programs: Milky Way Survey (MWS), Bright Galaxy Survey (BGS), Luminous Red Galaxies (LRGs), Emission Line Galaxies (ELGs), and Quasars (QSOs).</p>

    <h3 class="ffx-reveal">Fitting the first DESI galaxy spectra — DESI EDR catalog</h3>
    <p class="ffx-reveal">The FIREFLY DESI-EDR VAC (by Samuel Helps) contains over 1.6 million DESI galaxy spectra from the, fit for the first time with MaStar and FIREFLY's full-spectral fitting. The VAC provides some of the first insights into FIREFLY's capabilites deriving the properties of galaxies from an entirely new and upgraded survey, providing a completly new sample for studies of stellar populations across a wide range of mass, redshift and galaxy type.</p>
<!-- ===== Firefly DESI EDR Catalog Cards — Gradient-Edged, White Interior, Starry Buttons ===== -->
<div class="catalog-row space-theme-gradient ffx-reveal">
  
  <article class="catalog-card">
    <div class="card-inner">
      <div class="card-top">
        <div class="card-title">DESI EDR VAC (Samuel Helps)</div>
        <div class="card-badge">1.6M</div>
      </div>

      <ul class="card-highlights">
        <li>1,666,815 DESI galaxy spectra fitted with MaStar stellar population models</li>
        <li>Derived: Stellar and Remnant masses, metallicities, Luminosity-weighted and Mass-weighted Ages</li>
      </ul>

      <div class="download-row">
        <div class="btn-container">
          <a class="space-btn" href="#" download aria-label="Download DESI-EDR MaStar catalogue">
            <span>⤓ DESI-EDR FIREFLY VAC</span>
            <!-- many small stars for density -->
            <div class="star" style="left:12px; top:8px; animation-delay:0.2s;"></div>
            <div class="star" style="left:36px; top:22px; animation-delay:0.6s;"></div>
            <div class="star" style="left:68px; top:6px; animation-delay:1.1s;"></div>
            <div class="star" style="left:96px; top:30px; animation-delay:0.4s;"></div>
            <div class="star" style="left:140px; top:12px; animation-delay:1.7s;"></div>
            <div class="star" style="left:176px; top:6px; animation-delay:0.9s;"></div>
            <div class="star" style="left:200px; top:36px; animation-delay:1.3s;"></div>
            <div class="star" style="left:44px; top:40px; animation-delay:2.0s;"></div>
            <div class="star" style="left:120px; top:46px; animation-delay:0.8s;"></div>
            <div class="shooting-star shooting-star-1" style="animation-delay:3s;"></div>
            <div class="shooting-star shooting-star-2" style="animation-delay:6s;"></div>
          </a>
        </div>
      </div>
    </div>
  </article>

</div>

<style>
/* ===== Variables ===== */
:root{
  --border-grad: linear-gradient(-45deg, #f89b29 0%, #ff0f7b 100%);
  --card-radius: 12px;
  --btn-gradient: linear-gradient(80deg, #f89b29, #ec38bc, #7303c0, #03001e);
  --btn-width: 220px;
}

/* ===== Layout ===== */
.catalog-row.space-theme-gradient{
  display:flex;
  gap:2rem;
  flex-wrap:wrap;
  justify-content:center;
  max-width:1140px;
  margin:2rem auto;
  padding:0 12px;
}

/* ===== Card with gradient border + white interior =====
   using two-layer technique: outer = gradient border, inner = white background */
.catalog-card{
  background: var(--border-grad);
  padding: 5px; /* border thickness */
  border-radius: var(--card-radius);
  width: 400px;
  box-shadow: 0 14px 14px rgba(0,0,0,0.25);
  transition: transform .25s ease, box-shadow .25s ease;
}

.catalog-card:hover{ transform: translateY(-6px); box-shadow: 0 26px 70px rgba(0,0,0,0.45); }
/* highlights: kept short and clear */
.card-highlights{ margin:6px 0 16px 0; padding-left:1.5rem; color:#919191; }
.card-highlights li{ margin-bottom:0px; }
.card-inner{
  background: #fff;           /* white interior */
  color: #919191;             /* dark text */
  border-radius: calc(var(--card-radius) - 2px);
  padding: 20px;
  min-height: 260px;
  position: relative;
  font-family: Inter, "Helvetica Neue", Arial, sans-serif;
}

/* top row: title + badge */
.card-top{ display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:10px; }
.card-title{ font-size:18px; font-weight:700; color:#000000; }
.card-badge{
  background: linear-gradient(-45deg, #f89b29 0%, #ff0f7b 100% );
  padding:6px 10px;
  border-radius:8px;
  font-weight:800;
  color:#000000;
  box-shadow: inset 0 0 8px rgba(255,255,255,0.35), 0 8px 18px rgba(0,0,0,0.06);
}
.card-badge.refined{ background: linear-gradient(-45deg, #f89b29 0%, #ff0f7b 100% ); color:#000000; }


.card-inner {
  display: flex;
  flex-direction: column;
}
/* download row and button notes */
.download-row{ display:flex; justify-content: center; gap:12px; flex-wrap:wrap; align-items:flex-start; margin-top:6px; }
.btn-container{ width: var(--btn-width); display:flex; flex-direction:column; align-items:center; gap:8px; }

/* small note under button */
.btn-note{ font-size:12px; color:#333; margin-top:-6px; }

/* ===== Space button (anchor) ===== */
.space-btn{
  display:block;
  width:150%;
  height:40px;
  border-radius:11px;
  position:relative;
  overflow:hidden;
  text-decoration:none;
  background: var(--btn-gradient);
  color:#fff;
  font-weight:700;
  font-size:15px;
  display:flex;
  align-items:center;
  justify-content:center;
  box-shadow: inset 0 0 8px rgba(255,255,255,0.06), 0 10px 28px rgba(115,67,219,0.12);
  transition: transform .28s cubic-bezier(.2,.9,.3,1), box-shadow .28s;
}

/* glowing halo behind button on hover using container pseudo */
.btn-container::after{
  content:"";
  position:absolute;
  width:100%;
  height:100%;
  left:0;
  top:0;
  border-radius:11px;
  background: var(--btn-gradient);
  filter: blur(18px);
  opacity:0;
  z-index:-1;
  transition: opacity .45s cubic-bezier(.15,.83,.66,1), transform .45s;
}
.btn-container:hover::after{ opacity:0.55; transform: scale(1.02); }

/* hover lift */
.space-btn:hover{ transform: translateY(-5px); box-shadow: 0 18px 46px rgba(115,67,219,0.18); }

/* star dots */
.space-btn .star{
  position:absolute;
  width:2px; height:2px;
  background:white;
  border-radius:50%;
  opacity:0.95;
  box-shadow: 0 0 6px rgba(255,255,255,0.9);
  animation: blink 2.8s linear infinite;
}

/* shooting star / streaks */
.space-btn .shooting-star{
  position:absolute;
  width:90px; height:2px;
  background: linear-gradient(90deg, rgba(255,255,255,0.95), rgba(255,255,255,0.0));
  border-radius:50%;
  transform: rotate(-30deg);
  opacity:0;
}

/* assign animations to shooting classes */
.space-btn .shooting-star-1{ animation: fallingStar1 5.5s 0s cubic-bezier(.15,.83,.66,1) infinite; }
.space-btn .shooting-star-2{ animation: fallingStar2 6.2s 1.4s cubic-bezier(.15,.83,.66,1) infinite; }
.space-btn .shooting-star-3{ animation: fallingStar3 8.0s 2.2s cubic-bezier(.15,.83,.66,1) infinite; }
.space-btn .shooting-star-4{ animation: fallingStar4 7.0s 4.1s cubic-bezier(.15,.83,.66,1) infinite; }

/* Keyframes (blink + falling stars) */
@keyframes blink {
  0% { opacity:0.35; box-shadow:0 0 2px rgba(255,255,255,0.8); transform: scale(0.9); }
  50% { opacity:1; box-shadow:0 0 8px rgba(255,255,255,1); transform: scale(1.1); }
  100% { opacity:0.35; transform: scale(0.95); }
}

@keyframes fallingStar1 {
  0% { top:-20px; left:220px; opacity:0; }
  10% { opacity:1; }
  100% { top:200px; left:-40px; opacity:0; }
}
@keyframes fallingStar2 {
  0% { top:-10px; left:180px; opacity:0; }
  10% { opacity:1; }
  100% { top:200px; left:-80px; opacity:0; }
}
@keyframes fallingStar3 {
  0% { top:-10px; left:140px; opacity:0; }
  10% { opacity:1; }
  100% { top:200px; left:-160px; opacity:0; }
}
@keyframes fallingStar4 {
  0% { top:-10px; left:80px; opacity:0; }
  10% { opacity:1; }
  100% { top:200px; left:-240px; opacity:0; }
}

/* small screens: stack cards and make buttons smaller */
@media (max-width:1000px){
  .catalog-row.space-theme-gradient{ gap:1rem; }
  .catalog-card{ width:100%; max-width:640px; }
  .btn-container{ width:48%; }
  .card-inner{ padding:16px; }
}
</style>
  <p class="ffx-reveal">The following sky map shows the EDR tiling used to build the sample fit using FIREFLY. The footprint is patchy but broad, reflecting on the influence of Survey Validation and early survey fields on the EDR.</p>
  <div class="survey-image ffx-reveal wide-115">
      <div class="image-credit-wrapper">
        <img src="images/EDR-sky_dist.png" class="img-1000" alt="DESI sky distribution">
        <div class="image-credit">Credit: Samuel Helps (FIREFLY Collaboration) — <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></div>
      </div>
        </div>
      </div>
    </div>
    <p class="ffx-reveal">The galaxy catalog spans from the local universe out to z ≳ 1.5 with clear multi-modal structure driven by the DESI target classes (BGS, LRG, ELG, QSO). BGS targets tend to dominate the sample at low-to-intermediate redshift, while ELGs and LRGs fill the higher-z regime. This range of target galaxy type improves the statistical viability of studies that now have more ability to distinguish changes in galaxy characteristics between different galaxy populations.</p>
    <div class="desi-image-grid ffx-reveal wide-115" style="grid-template-columns: 1fr 1fr;">
      <div class="image-credit-wrapper">
        <img src="images/hexbin_total_mass_vs_redshift.png" class="img-940" alt="DESI hexbin total mass vs redshift">
        <div class="image-credit">Credit: Samuel Helps (FIREFLY Collaboration) — <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></div>
      </div>
    <ul class="ffx-reveal">
      <li><b>Mass measurements:</b> Stellar masses (log(M⋆/M☉)) from FIREFLY-MaStar fits and are directly comparable in redshift-dependence between all the DESI subsurvey variants.</li>
      <li><b>Completeness trends:</b> The density plot shows the increasing lower-mass cutoff with redshift and as we expect, greater mass galaxies at higher redshifts. Note that at extremely low redshifts FIREFLY has derived masses very low for some galaxies. Although this may be due to some misclassifications within DESI's relatively young dataset, the effect is also likely due to the much smaller fibers (1.5") of the DESI spectrograph. Users should be aware of this effect when measuring masses from extreamley low-redshift DESI targets.</li>
    </ul>
<ul class="ffx-reveal">
  <li><b>Dust distribution:</b> The dust attenuation parameter E(B-V) that FIREFLY calculates, exhibits a broad distribution that depends on stellar mass. Low-mass systems are predominantly dust-poor, while higher-mass galaxies span a wider range of attenuation values.</li>

  <li><b>Mass-dust relation:</b> The EBV-mass density plot shows a high-density locus at intermediate to high stellar mass with moderate E(B-V), alongside a concentration of massive, low-attenuation systems. This reflects the coexistence of dusty star-forming galaxies and more quiescent populations at similar stellar masses, enabling a statistical separation between dust-rich and dust-poor systems.</li>
</ul>
      <div class="right-images">
        <div class="image-credit-wrapper">
          <img src="images/hexbin_EBV_vs_total_mass.png" class="img-940" alt="DESI hexbin EBV vs total mass">
          <div class="image-credit">Credit: Samuel Helps (FIREFLY Collaboration) — <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></div>
        </div>
      </div>
</div>

    <div class="desi-image-grid ffx-reveal" style="margin-top:12px; grid-template-columns: 1fr 1fr; gap:16px; align-items:center;">
      <div class="image-credit-wrapper">
        <img src="images/snr_vs_mass_redshift_color.png" alt="DESI hexbin SNR vs mass vs redshift">
        <div class="image-credit">Credit: Samuel Helps (FIREFLY Collaboration) — <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></div>
      </div>

      <ul style="margin:0; padding-left:1.5rem;">
        <li><b>S/N behaviour:</b> The signal-to-noise (S/N) ratio per Å exhibits a strong dependence on stellar mass and redshift. At fixed redshift, S/N increases with stellar mass, while the typical S/N at a given mass declines with increasing redshift.</li>
      </ul>
    </div>

    <div class="survey-image ffx-reveal">
      <div class="image-credit-wrapper">
        <img src="images/snr_vs_mass_zbins.png" alt="DESI hexbin SNR vs mass vs redshift">
        <div class="image-credit">Credit: Samuel Helps (FIREFLY Collaboration) — <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></div>
      </div>
    </div>
      <ul class="ffx-reveal" >
        <li><b>Sample selection:</b> Per-spectrum S/N values are included in the catalog, enabling users to impose redshift- and science-driven S/N cuts (e.g. selecting high-S/N subsamples for detailed stellar population studies or retaining lower-S/N spectra for statistical analysis).</li>
      </ul>
    </div>

    <div class="desi-image-grid ffx-reveal wide-120" style="margin-top:16px; grid-template-columns: repeat(2, minmax(380px, 1fr)); gap:14px; align-items:center;">
      <div class="image-credit-wrapper" style="display:flex; justify-content:center; align-items:center; padding:8px;">
        <img src="images/823_spectrum_(EDR_100000-105000).png" alt="DESI EDR spectrum 716 fit" style="width:100%; max-width:720px; height:auto; object-fit:contain;">
      <div class="image-credit">Credit: Samuel Helps (FIREFLY Collaboration) — <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></div>
      </div>
      <div class="image-credit-wrapper" style="display:flex; justify-content:center; align-items:center; padding:8px;">
        <img src="images/10_spectrum_(EDR_100000-105000).png" alt="DESI EDR spectrum 823 fit" style="width:100%; max-width:720px; height:auto; object-fit:contain;">
      <div class="image-credit">Credit: Samuel Helps (FIREFLY Collaboration) — <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></div>
      </div>
      <div class="image-credit-wrapper" style="display:flex; justify-content:center; align-items:center; padding:8px;">
        <img src="images/1256_spectrum_(EDR_100000-105000).png" alt="DESI EDR spectrum 1256 fit" style="width:100%; max-width:720px; height:auto; object-fit:contain;">
      <div class="image-credit">Credit: Samuel Helps (FIREFLY Collaboration) — <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></div>
      </div>
      <div class="image-credit-wrapper" style="display:flex; justify-content:center; align-items:center; padding:8px;">
        <img src="images/952_spectrum_(EDR_100000-105000).png" alt="DESI EDR spectrum 952 fit" style="width:100%; max-width:720px; height:auto; object-fit:contain;">
      <div class="image-credit">Credit: Samuel Helps (FIREFLY Collaboration) — <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></div>
      </div>
    </div>

    <p class="ffx-reveal">Age and metallicity trends remain tight across the survey where massive galaxies stay old and metal-rich while lower-mass systems are younger with flatter [Z/H] evolution. FIREFLY also finds stellar populations ages to be well constrained by the cosmological age barrier (dotted line - Planck15 Cosmology).</p>

    <div class="survey-image ffx-reveal wide-120" style="margin-top:12px; justify-content:center;">
      <div class="image-credit-wrapper" style="display:flex; justify-content:center;">
        <img src="images/DESI_full_milano.png" alt="DESI EDR age and metallicity trends" style="width:100%; max-width:1120px; height:auto; object-fit:contain;">
      <div class="image-credit">Credit: Samuel Helps (FIREFLY Collaboration) — <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></div>
      </div>
    </div>
<ul class="ffx-reveal">
<li><b>Performance checks:</b> The stellar population models are based on the MaStar empirical library, calibrated using SDSS-IV MaNGA spectra and Sloan's instrumental characteristics. By assessing FIREFLY's SSP basis behavior on the new spectra from DESI we can determine weather the FIREFLY's models transfer reliably to DESI data despite differences in spectral resolution, wavelength coverage, and fibre aperture.</li>
</ul>
  <div class="desi-image-grid ffx-reveal" style="margin-top:12px; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap:16px; align-items:center;">
      <div class="image-credit-wrapper" style="display:flex; justify-content:center; align-items:center; padding:8px;">
        <img src="images/light_weighted_age_vs_ssp_number.png" alt="Light-weighted age vs SSP basis size" style="width:100%; max-width:520px; height:auto; object-fit:contain;">
      <div class="image-credit">Credit: Samuel Helps (FIREFLY Collaboration) — <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></div>
      </div>
      <div class="image-credit-wrapper" style="background:#f8f8f8; border-radius:8px; padding:18px; color:#555;">
        <p style="margin:0; font-weight:700;">Stability check</p>
        <p style="margin:8px 0 0 0;">When analysing the number of model combinations FIREFLY uses across the sample, the code performs well on the new DESI spectra, consistently averging a around three SSP combinations in its parameter derivation, reducing age gridding and potential bias on model library complexity.</p>
      </div>
    </div>

    <h3 class="ffx-reveal">Cross-catalog comparisons</h3>
    <p class="ffx-reveal">The DESI EDR FIREFLY VAC provides a unique stellar population analysis using full spectral fitting with MaStar models. Comparing with alternative methods like FastSpecFit, which employs a different fitting approach and models, can enable validation of derived properties and reveal systematic differences in stellar age and mass estimates between methodologies.</p>

    <div class="survey-image ffx-reveal wide-120" style="margin-top:12px; justify-content:center;">
      <div class="image-credit-wrapper" style="display:flex; justify-content:center;">
        <img src="images/mass_vs_age_sidebyside_density_4x2.png" alt="FIREFLY vs FastSpecFit mass and age comparison" style="width:100%; max-width:1120px; height:auto; object-fit:contain;">
      <div class="image-credit">Credit: Samuel Helps (FIREFLY Collaboration) — <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></div>
      </div>
    </div>

    <h3 class="ffx-reveal">FIREFLY across surveys</h3>
    <p class="ffx-reveal">FIREFLY's consistent performance across major spectroscopic surveys demonstrates the adaptability of the algorithm. Comparing the DESI EDR sample with previous FIREFLY SDSS VACs, using the same models and IMF, reveals how stellar population properties can evolve across different survey depths, wavelength coverage, spectroscopic fiber widths and target selection strategies. The DESI sample extends to higher redshifts, targeting a much more homegenous sample and consquently providing different constraints on galaxy evolution.</p>

    <div class="ffx-reveal" style="margin-top:12px; display:flex; gap:12px; align-items:flex-end; justify-content:center; flex-wrap:nowrap; max-width:1120px; margin-left:auto; margin-right:auto;">
      <div class="image-credit-wrapper" style="display:flex; flex-direction:column; align-items:center;">
        <img src="images/redshift_dist_raw.png" alt="Redshift distribution comparison DESI vs SDSS" style="max-height:5000px; width:auto; height:auto; object-fit:contain;">
        <div class="image-credit" style="margin-top:8px;">Credit: Samuel Helps (FIREFLY Collaboration) — <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></div>
      </div>

      <div class="image-credit-wrapper" style="display:flex; flex-direction:column; align-items:center;">
        <img src="images/3D_mass_metallicity_sfr.png" alt="Mass-metallicity-SFR correlation DESI vs SDSS" style="max-height:540px; width:auto; height:auto; object-fit:contain;">
        <div class="image-credit" style="margin-top:8px;">Credit: Samuel Helps (FIREFLY Collaboration) — <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></div>
      </div>
    </div>

  </section>
  </div>

<footer>
  <div style="max-width:1200px; margin:auto; padding: 20px; display:grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap:20px; font-size:0.95em;">
    <div>
      <h4 style="color:#f7ba2b; margin-bottom:8px;">Infomation</h4>
      <ul style="list-style:none; padding:0; margin:0;">
        <li><a href="index.html#intro" style="color:white; text-decoration:none;">About</a></li>
        <li><a href="index.html#models" style="color:white; text-decoration:none;">Models</a></li>
        <li><a href="index.html#contact" style="color:white; text-decoration:none;">Usage</a></li>
      </ul>
    </div>

    <div>
      <h4 style="color:#f7ba2b; margin-bottom:8px;">Get Started</h4>
      <ul style="list-style:none; padding:0; margin:0;">
        <li><a href="installation.html" style="color:white; text-decoration:none;">Installation</a></li>
        <li><a href="configuration.html" style="color:white; text-decoration:none;">Configuration</a></li>
        <li><a href="start-fitting.html" style="color:white; text-decoration:none;">Launch</a></li>
      </ul>
    </div>

    <div>
      <h4 style="color:#f7ba2b; margin-bottom:8px;">Projects</h4>
      <ul style="list-style:none; padding:0; margin:0;">
        <li><a href="publications.html" style="color:white; text-decoration:none;">Publications</a></li>
        <li><a href="desi.html" style="color:white; text-decoration:none;">DESI</a></li>
        <li><a href="sdss.html" style="color:white; text-decoration:none;">SDSS</a></li>
        
      </ul>
    </div>

    <div>
      <h4 style="color:#f7ba2b; margin-bottom:8px;">Data</h4>
      <ul style="list-style:none; padding:0; margin:0;">
        <li><a href="demofitter.html" style="color:white; text-decoration:none;">FIREFLY Demo</a></li>
        <li><a href="index.html#gallery" style="color:white; text-decoration:none;">Gallery</a></li>
        <li><a href="index.html#sky-map" style="color:white; text-decoration:none;">Sky Map</a></li>
      </ul>
    </div>
  </div>
  <div style="width:100%;margin:auto;">
    <canvas id="spectralWidget" style="width:100%;height:auto;"></canvas>
  </div>
  <p style="font-size: 0.85em; color: #868686;">
    &copy; 2026 Samuel Helps (FIREFLY Collaboration) | Code: 
    <a href="https://ui.adsabs.harvard.edu/abs/2017MNRAS.472.4297W" target="_blank">Wilkinson et al. (2017)</a>, 
    <a href="https://ui.adsabs.harvard.edu/abs/2022MNRAS.510.1538N" target="_blank">Neumann et al. (2022)</a> |
    Site & Infrastructure: Samuel Helps |
    <a href="credits.html">Credits</a>
  </p>
  <p style="font-size: 0.85em; color: #868686;">
    Code licensed under <a href="../LICENSE.md">MIT</a> | Content licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a>
  </p>
</footer>

<script>
const canvas = document.getElementById('spectralWidget');
const ctx = canvas.getContext('2d');

function resizeCanvas() {
    canvas.width = canvas.offsetWidth;
    canvas.height = 150;
}
resizeCanvas();
window.addEventListener('resize', resizeCanvas);

// Generate synthetic data and model
const N = 600;
let spectrum = new Array(N);
let model = new Array(N);
let wavelength = new Array(N);
for (let i = 0; i < N; i++) {
    const x = i / N * 10;
    wavelength[i] = x;
    spectrum[i] = 15 + 6 * Math.sin(x * 0.6) + Math.random() * 2;
    model[i] = 15 + 6 * Math.sin(x * 0.6 + 0.1) + Math.random() * 1; // trailing model
}

let progress = 0;
const fadeLength = 80; // Number of points over which to fade out

function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    const margin = 0;
    const w = canvas.width - 2 * margin;
    const h = canvas.height - 2 * margin;

    const maxY = Math.max(...spectrum) + 5;
    const minY = Math.min(...spectrum) - 5;

    const toCanvas = (x, y) => [
        margin + (x / 10) * w,
        canvas.height - margin - ((y - minY) / (maxY - minY)) * h
    ];

    // Draw spectrum with fade
    ctx.lineWidth = 2;
    for (let i = Math.max(1, progress - fadeLength); i < progress && i < N; i++) {
        let alpha = (i - (progress - fadeLength)) / fadeLength; // 0..1 fade factor
        ctx.strokeStyle = `rgba(70,130,180,${alpha.toFixed(2)})`; // steelblue fade

        ctx.beginPath();
        const [x0, y0] = toCanvas(wavelength[i - 1], spectrum[i - 1]);
        const [x1, y1] = toCanvas(wavelength[i], spectrum[i]);
        ctx.moveTo(x0, y0);
        ctx.lineTo(x1, y1);
        ctx.stroke();
    }

    // Draw model with fade
    for (let i = Math.max(1, progress - fadeLength - 20); i < progress - 20 && i < N; i++) {
        if(i < 1) continue;
        let alpha = (i - (progress - fadeLength - 20)) / fadeLength; // same fade factor shifted by delay
        if(alpha < 0) alpha = 0;
        if(alpha > 1) alpha = 1;

        ctx.strokeStyle = `rgba(218,165,32,${alpha.toFixed(2)})`; // goldenrod fade
        ctx.lineWidth = 2;

        ctx.beginPath();
        const [x0, y0] = toCanvas(wavelength[i - 1], model[i - 1]);
        const [x1, y1] = toCanvas(wavelength[i], model[i]);
        ctx.moveTo(x0, y0);
        ctx.lineTo(x1, y1);
        ctx.stroke();
    }

    // Increment progress and loop
    if (progress < N + fadeLength + 20) {
        progress += 2;
        requestAnimationFrame(draw);
    } else {
        progress = 0; // Loop animation
        setTimeout(() => requestAnimationFrame(draw), 1000);
    }
}

draw();
</script>
</body>
</html>


